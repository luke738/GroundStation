<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/dashboard-uhf.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>Account Info</title>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-item nav-link" href="dashboard_s_band.html">Dashboard S-band </a>
                <a class="nav-item nav-link" href="dashboard_uhf_band.html">Dashboard UHF</a>
                <a class="nav-item nav-link active" href="class_logistics.html">Account Info<span class="sr-only">(current)</span></a>
            </div>
        </div>
    </nav>

    <!--change password functionality-->
    <form id = "loginBox" onsubmit="return sendData()">
        <div>
            <p>Change password? </p>
            <input id="new_password" name="new_password" type="text" placeholder="New Password">
        </div>

        <input id="submit" type="button" value="Change Password" onclick="sendData();"/>
    </form>

    <div id = "onsuccess"></div>


</body>
</html>

<script>
    function sendData(){
        var new_password = document.querySelector('#new_password');

        var xhr = new XMLHttpRequest();
        var data = {};
        xhr.open("POST", "/User?change_pw=True&new_password="+new_password.value, false);
        xhr.send(data);

        var response = JSON.parse(xhr.response); //Could check and see if request was successful
        console.log("RESP: " + xhr.response);
        console.log("RESP: " + response.header);

        document.querySelector('#onsuccess').innerHTML = response.header;

    }

</script>